<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10">
  <div class="glass-effect rounded-3xl p-8 shadow-glow">
    <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6">
      <div>
        <h1 class="text-3xl font-bold text-white">Admin - Pedidos</h1>
        <p class="text-white/70">Seguimiento minimo de estado de pedidos</p>
      </div>

      <%= form_with url: admin_orders_path, method: :get, local: true, class: "flex gap-2 items-center" do %>
        <label for="status" class="text-white/80 text-sm">Filtrar por estado</label>
        <select id="status" name="status" class="rounded-xl px-3 py-2 bg-white/20 text-white border border-white/30">
          <option value="">Todos</option>
          <% available_statuses.each do |status| %>
            <option value="<%= status %>" <%= "selected" if status == @status_filter %>><%= translated_order_status(status) %></option>
          <% end %>
        </select>
        <button type="submit" class="bg-white/20 text-white px-4 py-2 rounded-xl border border-white/30 hover:bg-white/30">Aplicar</button>
      <% end %>
    </div>

    <% if flash[:notice].present? %>
      <div class="mb-4 p-3 rounded-xl bg-emerald-500/30 text-emerald-100 border border-emerald-300/40"><%= flash[:notice] %></div>
    <% end %>
    <% if flash[:alert].present? %>
      <div class="mb-4 p-3 rounded-xl bg-rose-500/30 text-rose-100 border border-rose-300/40"><%= flash[:alert] %></div>
    <% end %>

    <div class="overflow-x-auto">
      <table class="min-w-full text-sm text-left">
        <thead>
          <tr class="text-white/80 border-b border-white/20">
            <th class="py-3 pr-4">Pedido</th>
            <th class="py-3 pr-4">Fecha</th>
            <th class="py-3 pr-4">Estado</th>
            <th class="py-3 pr-4">Cliente</th>
            <th class="py-3 pr-4">Total</th>
            <th class="py-3 pr-4"></th>
          </tr>
        </thead>
        <tbody>
          <% @orders.each do |order| %>
            <tr class="border-b border-white/10 text-white/95">
              <td class="py-3 pr-4 font-semibold"><%= order.order_number %></td>
              <td class="py-3 pr-4"><%= order.created_at.strftime("%Y-%m-%d %H:%M") %></td>
              <td class="py-3 pr-4">
                <span class="px-2 py-1 rounded-lg bg-white/20 border border-white/20"><%= translated_order_status(order.status) %></span>
              </td>
              <td class="py-3 pr-4"><%= order.address&.full_name || "-" %></td>
              <td class="py-3 pr-4">$<%= format("%.2f", order_total(order)) %></td>
              <td class="py-3 pr-4">
                <%= link_to "Ver detalle", admin_order_path(order), class: "underline text-yellow-200 hover:text-white" %>
              </td>
            </tr>
          <% end %>
          <% if @orders.empty? %>
            <tr>
              <td colspan="6" class="py-8 text-center text-white/70">No hay pedidos para mostrar.</td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>
