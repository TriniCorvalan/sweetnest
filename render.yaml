# Render Blueprint: SweetNest
# Conecta este repo en Render y usa "New > Blueprint" para crear Postgres + Web Service.
# Debes definir SECRET_KEY_BASE en el Dashboard (Environment) al crear el servicio.

databases:
  - name: sweetnest-db
    plan: free
    databaseName: sweetnest_production
    region: virginia
    # region: oregon  # por defecto; si cambias región, pon RENDER_REGION en el Web Service

services:
  - type: web
    runtime: docker
    name: sweetnest
    rootDir: sweetnest
    plan: free
    region: virginia
    # Misma región que la DB para que la URL externa resuelva (ej. oregon → .oregon-postgres.render.com)
    envVars:
      - key: RAILS_ENV
        value: production
      - key: RAILS_SERVE_STATIC_FILES
        value: "true"
      - key: RAILS_LOG_TO_STDOUT
        value: "true"
      - key: SECRET_KEY_BASE
        sync: false
      - key: DATABASE_URL
        fromDatabase:
          name: sweetnest-db
          property: connectionString
    # Añade en el Dashboard si los usas: ADMIN_USERNAME, ADMIN_PASSWORD, TRANSFER_*, MAIL_FROM
